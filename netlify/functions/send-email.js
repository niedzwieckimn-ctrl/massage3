// netlify/functions/send-email.jsexports.handler = async (event) => {  try {    if (event.httpMethod !== 'POST') {      return { statusCode: 405, body: JSON.stringify({ error: 'Method not allowed' }) };    }
    const { to, subject, html } = JSON.parse(event.body || '{}');    if (!to || !subject || !html) {      return { statusCode: 400, body: JSON.stringify({ error: 'Missing required fields: to, subject, html' }) };    }
    const apikey = process.env.RESEND_API_KEY;    const from = process.env.FROM_EMAIL || 'onboarding@resend.dev';    if (!apikey) {      return { statusCode: 500, body: JSON.stringify({ error: 'Missing RESEND_API_KEY env var' }) };    }
    const resp = await fetch('https://api.resend.com/emails', {      method: 'POST',      headers: {        Authorization: `Bearer ${apikey}`,        'Content-Type': 'application/json',      },      body: JSON.stringify({ from, to, subject, html }),    });
    const data = await resp.json();
    if (!resp.ok) {      console.error('Resend error:', data);      return { statusCode: resp.status, body: JSON.stringify({ ok: false, status: resp.status, data, message: data?.message }) };    }
    return { statusCode: 200, body: JSON.stringify({ ok: true, id: data.id || null }) };  } catch (e) {    console.error(e);    return { statusCode: 500, body: JSON.stringify({ error: 'Server error' }) };  }};